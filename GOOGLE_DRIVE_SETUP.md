# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive –¥–ª—è Picture Bot üöÄ

## –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ Google Drive credentials

### 1.1 –û—Ç–∫—Ä–æ–π—Ç–µ Google Cloud Console

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.cloud.google.com/

### 1.2 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –ù–∞–∂–º–∏—Ç–µ **"NEW PROJECT"**
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `picture-bot`
4. –ù–∞–∂–º–∏—Ç–µ **Create**

### 1.3 –í–∫–ª—é—á–∏—Ç–µ Google Drive API

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ **"APIs & Services"** ‚Üí **"Library"**
2. –ü–æ–∏—â–∏—Ç–µ **"Google Drive API"**
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë ‚Üí **"Enable"**

### 1.4 –°–æ–∑–¥–∞–π—Ç–µ Service Account

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"APIs & Services"** ‚Üí **"Credentials"**
2. –ù–∞–∂–º–∏—Ç–µ **"Create Credentials"** ‚Üí **"Service Account"**
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `picture-bot-sa`
4. –ù–∞–∂–º–∏—Ç–µ **Create and Continue**
5. –ù–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ **Continue**
6. –ù–∞–∂–º–∏—Ç–µ **Done**

### 1.5 –°–æ–∑–¥–∞–π—Ç–µ JSON –∫–ª—é—á

1. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π Service Account –≤ —Å–ø–∏—Å–∫–µ
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ ‚Üí –≤–∫–ª–∞–¥–∫–∞ **"Keys"**
3. –ù–∞–∂–º–∏—Ç–µ **"Add Key"** ‚Üí **"Create new key"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"JSON"**
5. –ù–∞–∂–º–∏—Ç–µ **Create**

**–í–∞—à —Ñ–∞–π–ª `credentials.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è!**

### 1.6 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials.json –≤ –ø–∞–ø–∫—É –±–æ—Ç–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É picture_bot_tg
cp ~/Downloads/... picture_bot_tg/credentials.json
```

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –Ω–∞ Google Drive

### 2.1 –û—Ç–∫—Ä–æ–π—Ç–µ Google Drive

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://drive.google.com/

### 2.2 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–∞–ø–∫—É

1. –ù–∞–∂–º–∏—Ç–µ **"New"** ‚Üí **"Folder"**
2. –ù–∞–∑–æ–≤–∏—Ç–µ –µ—ë: `picture-bot-images`
3. –ù–∞–∂–º–∏—Ç–µ **Create**

### 2.3 –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –∏ –ø–æ–ª—É—á–∏—Ç–µ ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://drive.google.com/drive/folders/1a2b3c4d5e6f7g8h9i0j/
                                        ‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë‚Üë
   –≠—Ç–æ –≤–∞—à FOLDER_ID
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç ID (—á–∞—Å—Ç—å –ø–æ—Å–ª–µ `/folders/`)

### 2.4 –î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø Service Account

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É
2. –ù–∞–∂–º–∏—Ç–µ **"Share"**
3. –í —Å—Ç—Ä–æ–∫—É **"Add people and groups"** –≤—Å—Ç–∞–≤—å—Ç–µ email Service Account:
   - –û—Ç–∫—Ä–æ–π—Ç–µ `credentials.json` (–≤ –±–ª–æ–∫–Ω–æ—Ç–µ)
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `"client_email"`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ email –∞–¥—Ä–µ—Å
4. –í—ã–±–µ—Ä–∏—Ç–µ **"Viewer"** (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è)
5. –ù–∞–∂–º–∏—Ç–µ **Share**

---

## –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
# Image source
IMAGE_SOURCE=google_drive

# Google Drive settings
GOOGLE_DRIVE_CREDENTIALS=credentials.json
GOOGLE_DRIVE_FOLDER_ID=–≤–∞—à_folder_id_—Å—é–¥–∞
GOOGLE_DRIVE_CACHE_DIR=./image_cache
```

**–ü—Ä–∏–º–µ—Ä:**
```env
IMAGE_SOURCE=google_drive
GOOGLE_DRIVE_CREDENTIALS=credentials.json
GOOGLE_DRIVE_FOLDER_ID=1a2b3c4d5e6f7g8h9i0j
GOOGLE_DRIVE_CACHE_DIR=./image_cache
```

---

## –®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –Ω–∞ Google Drive
2. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Å—é–¥–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∏–ª–∏ –æ—Ç–∫—É–¥–∞ —É–≥–æ–¥–Ω–æ)
3. –ë–æ—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏

---

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
python check_config.py
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `‚úì Configuration is valid!` - –≤—Å—ë –≥–æ—Ç–æ–≤–æ!

---

## –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
python main.py
```

---

## –°–æ–≤–µ—Ç—ã

### –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –Ω–∞ Google Drive
2. –ù–∞–∂–º–∏—Ç–µ **"Upload files"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
4. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏!

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å email Service Account

–û—Ç–∫—Ä–æ–π—Ç–µ `credentials.json` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –Ω–∞–π–¥–∏—Ç–µ:

```json
{
  "type": "service_account",
  "project_id": "...",
  "private_key_id": "...",
  "private_key": "...",
  "client_email": "picture-bot-sa@project-id.iam.gserviceaccount.com",  ‚Üê –í–û–¢ –≠–¢–û–¢ EMAIL
  ...
}
```

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–∫–∞—á–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–∞–ø–∫–µ `./image_cache/`. –≠—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à —Å–∫–∞—á–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫.

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### "Credentials file not found"

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `credentials.json` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `picture_bot_tg/`

```bash
ls -la picture_bot_tg/credentials.json
```

### "Failed to authenticate with Google Drive"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `credentials.json` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ (Share)

### "No images found"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –ø–∞–ø–∫–µ –µ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (jpg, png, gif, etc.)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø (Viewer)

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–∞—à–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Google Drive!** üéâ
